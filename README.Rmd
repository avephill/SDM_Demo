---
title: "README.md"
author: "Avery"
date: "10/7/2020"
output:
  md_document:
    variant: markdown_github
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = F, warning = F)
```
# An overview of Species Distribution Modeling in R
### This demo was largely based on [Hijmans & Elith, 2013](https://cran.r-project.org/web/packages/dismo/vignettes/sdm.pdf) and the [sdm](https://cran.r-project.org/web/packages/sdm/sdm.pdf) and [dismo](https://cran.r-project.org/web/packages/dismo/dismo.pdf) documentation pages. This serves to provide a walkthrough of SDM and popular implementations in R as of Fall 2020. I've included the extent of my understanding of how the different methods work.
### If you already have an understanding of the motivation of SDM, continue here to learn more about implementation. If you'd like a brief refresher on the motivation and general application of SDM take a look at the powerpoint in this git repository.
### Feel free to download the sdm_demo.R script, install the necessary packages, and run and manipulate this code as you see fit. 

Let's start by reading in the necessary packages
```{r packages}
# For downloading occurrence data from multiple sources
library(spocc)
# For data manipulation and presentation
library(tidyr)
library(dplyr)
library(ggplot2)
# Provides various functions relating to spatial analysis
library(maptools)
library(sp)
# Reads and manipulates vector data
library(rgdal)
# Reads and manipulates raster data
library(raster)
# SDM packages
library(dismo)
library(sdm)
```

# Prepare occurrence data
We'll use the west coast carnivorous plant, [*Darlingtonia californica*](https://en.wikipedia.org/wiki/Darlingtonia_californica), as our species of interest.
![*Darlingtonia Californica*](/includes/dar.jpg)
```{r occurrence data}
# Source occurrence data from iNaturalist
dc <- occ(query = "Darlingtonia californica", from = 'inat')
# Could just as easily source from gbif:
# dc <- occ(query = "Darlingtonia californica", from = 'gbif')

# Horrible nasty function that makes species occurrence data into lon, lat dataframe
# This is specific to the format that iNaturalist puts data in
dc.df <-  as.data.frame(dc$inat$data$Darlingtonia_californica%>%
  dplyr::filter(identifications_most_agree == TRUE) %>%
  dplyr::select(location)) %>% 
  filter(!is.na(location)) %>% 
  separate(location, c("lat", "lon"), ",") %>% 
  select(lon, lat)

# Lat and Lon columns must be specified as numeric values
dc.df$lon <- as.numeric(dc.df$lon)
dc.df$lat <- as.numeric(dc.df$lat)
head(dc.df)
```

